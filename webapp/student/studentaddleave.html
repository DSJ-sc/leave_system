<!doctype html>
<html>

	<head>
		<meta charset="utf-8">
		<meta http-equiv="X-UA-Compatible" content="IE=edge">
		<title>添加请假请求</title>
		<meta name="description" content="这是一个 index 页面">
		<meta name="keywords" content="index">
		<meta name="viewport" content="width=device-width, initial-scale=1">
		<meta name="renderer" content="webkit">
		<meta http-equiv="Cache-Control" content="no-siteapp" />
		<link rel="icon" href="../assets/i/favicon.ico">
		<meta name="apple-mobile-web-app-title" content="Amaze UI" />
		<link rel="stylesheet" href="../assets/css/amazeui.min.css" />
		<link rel="stylesheet" href="../assets/css/admin.css">
		<link rel="stylesheet" href="../assets/css/app.css">
		<link rel="stylesheet" href="../assets/css/ace.min.css">
		<link rel="stylesheet" href="../assets/css/bootstrap.css">
		<link rel="stylesheet" href="../assets/css/amazeui.datetimepicker.css" />
	</head>

	<body data-type="index" style="background-color: #E4E6E9;">


		<header class="am-topbar am-topbar-inverse admin-header">
			<div class="am-topbar-brand am-sans-serif">
				<img src="../assets/img/logo.png" width="70px" height="71px" />
				哈尔滨信息工程学院
			</div>


			<button class="am-topbar-btn am-topbar-toggle am-btn am-btn-sm am-btn-success am-show-sm-only" data-am-collapse="{target: '#topbar-collapse'}"><span
				 class="am-sr-only">导航切换</span> <span class="am-icon-bars"></span></button>

			<div class="am-collapse am-topbar-collapse" id="topbar-collapse">

				<ul class="am-nav am-nav-pills am-topbar-nav am-topbar-right admin-header-list tpl-header-list">
				
					<li class="am-dropdown" data-am-dropdown data-am-dropdown-toggle>
						<a class="am-dropdown-toggle tpl-header-list-link" href="javascript:;">
							<span class="am-icon-edit"></span> 请假
						</a>
						<ul class="am-dropdown-content tpl-dropdown-content">
							<li>
								<a href="javascript:;" class="tpl-dropdown-content-progress">
									<span class="task">
										<i class="am-icon-plus-circle"> </i>
										<span class="desc">添加请假请求</span>
									</span>
								</a>
							</li>
							<li>
								<a href="studentLeaveInfo.html" class="tpl-dropdown-content-progress">
									<span class="task">
										<i class="am-icon-search-plus"></i>
										<span class="desc">查看请假请求</span>
									</span>
								</a>
							</li>

						</ul>
					</li>
					<li class="am-dropdown" data-am-dropdown data-am-dropdown-toggle>
						<a class="am-dropdown-toggle tpl-header-list-link" href="javascript:;">
						 <span class="am-icon-user"> </span>
						</a>
						<ul class="am-dropdown-content">
							<li><a class="tpl-dropdown-content-progress" href="studentIndex.html"><span class="am-icon-bell-o"></span> 资料</a></li>
							<li><a class="tpl-dropdown-content-progress" href="cancellation"><span class="am-icon-power-off"></span> 退出</a></li>
						</ul>
					</li>
				</ul>
			</div>
		</header>
		<div id="page-content" class="page-content">
		<div class="tpl-page-container tpl-page-header-fixed">
			<div class="tpl-portlet-components">
				<div class="portlet-title">
					<div class="caption font-green bold">
						<span class="am-icon-code"></span> 添加请假请求
					</div>
				</div>

				<div class="tpl-block">
					<div class="am-g">

						<div class="tpl-form-body tpl-form-line">
							<form class="am-form tpl-form-line-form" action="addleave" method="post" enctype="multipart/form-data">
								<div class="am-form-group">
								<input type="hidden" name="studentName" class="studentName">
									<label id="leaveTime"  class="am-u-sm-3 am-form-label">请假时间 <span class="tpl-form-line-small-title">Time</span></label>
									<div class="am-u-sm-9">
										<p class="times" style="float: left; width: 40%; margin:0; margin-right: 10px;" >
										<input type="text"  name="leaveStartTime" id="leaveStartTime"  placeholder="开始时间"   readonly>
										<small id="leaveStartTimeTips" style="color: red;">必填</small>
										</p>
										<p class="times" style="float: left;width: 40%; margin: 0;">
										<input type="text" id="leaveEndTime" name="leaveEndTime"  placeholder="结束时间"  readonly>
										<small id="leaveEndTimeTips" style="color: red;">必填</small>
										</p>
									</div>
								</div>
								<div class="am-form-group">
									<label id="leavetype"  class="am-u-sm-3 am-form-label">请假类型 <span class="tpl-form-line-small-title">Type</span></label>
									<div class="am-u-sm-9">
										<select id="leaveType" name="leaveType" data-am-selected>
											<option value="1">事假</option>
											<option value="2">病假</option>
											<option value="3">晚假</option>
										</select>
									</div>
								</div>
								<div class="am-form-group">
									<label id="prove"  class="am-u-sm-3 am-form-label">请假证明 <span class="tpl-form-line-small-title">Prove</span></label>
									<div class="am-u-sm-9">
										<div class="am-form-group am-form-file" style="width: 135px;">
											<button type="button" class="am-btn am-btn-danger am-btn-sm">
												<i class="am-icon-cloud-upload"></i> 添加请假证明</button>
											<input id="file" name="file" type="file" multiple>
										</div>

									</div>
								</div>
								<div class="am-form-group">
									<label id="phone" class="am-u-sm-3 am-form-label">家长联系电话 <span class="tpl-form-line-small-title">Phone</span></label>
									<div class="am-u-sm-9">
										<input type="text"  name="parentPhone" placeholder="输入家长联系电话">
									</div>
								</div>
								<div class="am-form-group">
									<label id="reason"   class="am-u-sm-3 am-form-label">请假理由 <span class="tpl-form-line-small-title">Reason</span></label>
									<div class="am-u-sm-9">
										<textarea class="" id="leaveReason" name="leaveReason" rows="5" id="user-intro" placeholder="请输入请假理由"></textarea>
									</div>
								</div>
								<div class="am-form-group">
									<div class="am-u-sm-9 am-u-sm-push-3">
										<button type="submit" id="submit"  class="am-btn  am-btn-primary tpl-btn-bg-color-success ">提交</button>
									</div>
								</div>
							</form>

						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
		

		<div id="mobileFlag" class="visible-xs-block"></div>
		<script src="../assets/js/jquery3.3.1.js"></script>
		<script src="../assets/js/amazeui.js"></script>
		<script src="../assets/js/iscroll.js"></script>
		<script src="../assets/js/amazeui.datetimepicker.js"></script>
		<script src="../assets/js/date.js"></script>
		<script>
		if(window.location.search=='?error'){
			alert("你已在当日请假请等待老师批准或修改请假请求");
		}
			$(function(){
				$.ajax({
				     async : true ,
				     type : "post",//传值方式
				     url : '../getUser',//请求的地址
				     data : { 
				    	 "identity":'student'
				     },
				     //回调函数 返回的值
				     success : function(data) {
				    	 if(data.studentApartment == null || data.studentPhone ==null){
				    		 alert("请完善个人信息");
				    		 window.location.replace("studentIndex.html");
				    	 }
				    	$(".am-icon-user").append(data.studentName);
				    	$('.studentName').val(data.studentName);
                        if(data.studentClass.classGuideTeacher == null || data.studentClass.classHeadTeacher ==null){
                            $('#submit').attr("disabled","disabled");
                        }
				     	}
				     }); 
			if ($("#mobileFlag").is(":hidden")) {
					$(".times").css("width","30%");
					$("#page-content").css("padding","1px 1px");
					$("#page-content").css("margin","90px 15px 15px 15px");
					$(".tpl-page-container").css("margin","0");
				}else{
					$('body').css("background-color","");
					$(".am-selected").css("width","135px");
					$("#leaveTime").text("时间");
					$("#leavetype").text("类型");
					$("#prove").text("证明");
					$("#reason").text("理由");
					$("#phone").text("电话");
				}
			});
			$("#submit").click(function(){
				var start = $("#leaveStartTime").val();
				var end = $("#leaveEndTime").val();
				if(start==''|| end==''){
					 alert("开始或结束时间不能为空");
					return false;
				}
				var startTime = new Date(start);
				var endTime = new Date(end);
				 if(endTime.getTime()<startTime.getTime()){
					 alert("结束时间必须大于开始时间");
					 return false;
				 }
				
			});
		</script>
	</body>

</html>
